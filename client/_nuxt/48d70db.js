(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{385:function(e,t,n){"use strict";n.r(t);var r=n(157),c=n(7),o=(n(38),n(14),n(216),n(48),n(56),n(47),n(65)),l={data:function(){return{jwtToken:"",data:[],picked:"",searchValue:"",inputVal:"",imageUrl:o.k}},mounted:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.jwtToken=localStorage.getItem("jwt"),t.prev=1,!e.jwtToken){t.next=5;break}return t.next=5,e.$store.dispatch("requests/checkJwt");case 5:return t.next=7,e.$store.dispatch("requests/getAll","request");case 7:e.data=t.sent,t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),e.$store.dispatch("setMessage",{value:t.t0.message,type:"warning"}),localStorage.removeItem("jwt");case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))()},methods:{pickedBy:function(text){this.picked=text},HandleDelete:function(e){var t=this;return Object(c.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$axios.$delete("/api/request/"+e,{headers:{Authorization:"Bearer ".concat(t.jwtToken)}});case 3:t.$store.commit("setMessage",{value:"Request was successfully deleted",type:"primary"}),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.$store.commit("setMessage",{value:n.t0,type:"danger"});case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))()}},computed:{sortedData:function(){var e=this;return Object(r.a)(this.data).sort((function(a,b){return a[e.picked]>b[e.picked]?1:-1})).filter((function(t){return e.searchValue?t.email.includes(e.searchValue):t}))}}},d=n(13),component=Object(d.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchValue,expression:"searchValue"}],staticClass:"form-control my-2",attrs:{type:"search"},domProps:{value:e.searchValue},on:{input:function(t){t.target.composing||(e.searchValue=t.target.value)}}}),e._v(" "),e.sortedData?n("table",{staticClass:"table b-1"},[n("thead",{staticClass:"thead-dark"},[n("tr",[n("th",{class:{active:"name"===e.picked},on:{click:function(t){return e.pickedBy("name")}}},[e._v("Name")]),e._v(" "),n("th",{class:{active:"Email"===e.picked},on:{click:function(t){return e.pickedBy("Email")}}},[e._v("Email")]),e._v(" "),n("th",{class:{active:"Phone"===e.picked},on:{click:function(t){return e.pickedBy("Phone")}}},[e._v("Phone")]),e._v(" "),n("th",[e._v("Action")])])]),e._v(" "),n("tbody",e._l(e.sortedData,(function(t,i){return n("tr",{key:i},[t.name?n("td",[n("h4",[e._v(e._s(t.name))])]):e._e(),e._v(" "),t.email?n("td",[n("h4",[e._v(e._s(t.email))])]):e._e(),e._v(" "),t.phone?n("td",[n("h4",[e._v(e._s(t.phone))])]):e._e(),e._v(" "),n("td",[n("button",{staticClass:"btn btn-danger",on:{click:function(n){return e.HandleDelete(t._id)}}},[e._v("Delete")])])])})),0)]):e._e()])}),[],!1,null,"5af0cd9c",null);t.default=component.exports}}]);